import personas.*
import financieros.*
import abstractos.*
describe "Tests"{
    method pepita(){
        const tarjeta = new Credito(bancoEmisor = new Banco(cuotas = 5, tope = 1000))
        const pepita = new Persona(
            pagoPreferido = tarjeta,
            trabajo = new Empleo(salario = 10),
            formasDePago = [tarjeta]
        )

        return pepita
    }
    test "Compra en cuotas"{
        const pepita = self.pepita()
        const heladera = new Articulo(precio = 10, nombre = "heladera")
        pepita.comprar(heladera)
        mes.pasarMes()
        mes.pasarMes() //Paso meses sin que pepita cobre, para que acumule deudas
        assert.equals(pepita.cuotasAPagar().sum{x => x.valor()}, 6)
    }

    test "Pepita es la que m√°s tiene"{
        const pepita = self.pepita()
        const heladera = new Articulo(precio = 10, nombre = "heladera")
        pepita.comprar(heladera)
        universo.personas().add(pepita)
        assert.equals(universo.personaConMasCosas(), pepita)
    }

    test "Pepita prefiere efectivo"{
        const pepita = self.pepita()
        const efectivo = new Efectivo(dinero = 100)
        pepita.formasDePago().add(efectivo)
        pepita.cambiarPagoPreferido(efectivo)
        pepita.comprar(new Articulo(precio = 10, nombre = "heladera"))
        assert.equals(efectivo.disponible(), 90)
    }
}